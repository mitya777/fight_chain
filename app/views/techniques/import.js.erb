(function(){

    //make movies obey z index
    var movies = document.getElementsByTagName("embed");
    for(var i = 0; i < movies.length; i++){ 
      var embed = movies[i];
      if (embed.type === "application/x-shockwave-flash"){
        embed.setAttribute("wmode", "transparent");
      }
    }

    var script = document.getElementById("fight_chain_script");

    var overlayDiv = document.createElement("div");
    overlayDiv.id = "fight_chain_overlay";
    overlayDiv.style.height = "100%";
    overlayDiv.style.width = "100%"; 
    overlayDiv.style.position = "fixed";
    overlayDiv.style.top = "0px";
    overlayDiv.style.zIndex = "1000";
    overlayDiv.style.backgroundColor = "rgba(255, 255, 255, .3)";
    document.body.appendChild(overlayDiv);
    overlayDiv.addEventListener("click", function overlayHandler(event){
      event.stopPropagation();
      overlayDiv.removeEventListener("click", overlayHandler, false);
      overlayDiv.parentNode.removeChild(overlayDiv);
      script.parentNode.removeChild(script);
    }, false);

    var iframe = document.createElement("iframe");
    iframe.id = "fightchain_savetech";
    iframe.src = "http://127.0.0.1:3000/savetech";
    iframe.style.height = "200px";
    iframe.style.width = "300px";
    iframe.style.margin = "150px auto";
    iframe.style.backgroundColor = "white";
    iframe.style.border = "solid 2px black";
    iframe.style.display = "block";
    overlayDiv.appendChild(iframe);
    
})();
